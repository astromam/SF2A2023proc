INSTRUCTIONS
------------

- create the architecture to store the various contributions. From the proceeding root directory the architecture  must follow proceeding_ROOT/contrib/SXX/Author_SXX/

- Move the contributions (the tex and bib files and the associated PDF figures) into the sub-directory contrib/SXX/Author_SXX/ where SXX is the session of the contribution (S01, S02, ...,S20...) and run the script check_contrib.py on the files. It will make a copy of the file, translate the contribution to pure latex, verify the existence of the figures and test compile the contribution.


- Edit the file book-setup.py :
	- update the year
	- update the clsfile if needed
	- update the list of editors
	- update the definition of the sessions and contributions
	- fill in the title of the sessions

- Link the foreword tex file (written by the president of the SF2A) or just rename it
	ln -s your_foreword_file.tex input_foreword.tex
Or
	mv your_foreword_file.tex input_foreword.tex

- Edit book_cover.tex (the file handling the cover page)
	- update the list of editors
	- insert the conference picture/logo etc
	- update location and dates
	- add sponsors logo

- Create the SXX.tex files (head of chapter) in contrib/SXX/ (XX is the session number). To do this run the script make_sessions.py (warning python 3.6+)

- Compile all contributions:
  The compilation is performed by the script make-contrib.py
  The LaTex files are compiled using pdflatex. The bibliography of a given contribution is generated by running bibtex (the scripts checks for the existence of a .bib file to run bibtex).    
  In case of errors during the compilation, correct appropriately the contribution that causes the error and run manually the sequence pdflatex yourfile; bibtex yourfile; pdflatex yourfile; pdflatex yourfile
  If the error was caused by large figures, this problem will appear again while compiling the full proceeding as the inclusion of the pdf will cause a timeout and this message will appear: 'xdvipdfmx:fatal: pdf_link_obj(): passed invalid object.' but not while processing the file in question. To solve this issue, rewrite the pdf yourfile.pdf using gs. Follow this steps:
  cp yourfile.pdf yourfile.bak.pdf
  gs -o yourfile.pdf -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress yourfile.bak.pdf
  

- Book setup:
	Run the Python script make-book.py. This script build the list of contributions (abstracts_ads.txt and index.html) and the file inputpdf.tex (see outputs). 
	Once executed, look at the content of make-book.log to check the way the contributions were included.
	The script may have changed the page counter of one or several contributions. In that case the script will ask the permission to execute the command 'make-contrib.py'

- Edit the inputdpdf.tex file (check for misspelling and bad indexes)

- Edit appropriately the files book_packages.tex, liste_participants.tex and book.tex

- Generate the book (book.pdf) and associated files (contents.pdf, participants.pdf, authors_index.pdf) by typing:
	touch book.ind
	xelatex book
	makeindex book
	xelatex book
	xelatex book

- Create the archive for the website:
	cd contrib
	tar rhvf book.tar book.pdf participants.pdf contents.pdf authors_index.pdf foreword.pdf index.html 
	gzip -f book.tar

- Once the proceedings are online, send abstract_ads.tex to ADS. Follow the procedure describe at this location: https://ui.adsabs.harvard.edu/help/data_faq/conf_proc

OUTPUTS
-------

- the directory contrib/ will  contain all the individual contribution as a link to the contribution in subfolders in PDF format.

- book.pdf : the whole book (including the TOC, list of participants, the contributions and the authors index)

- contents.pdf : the table of contents (TOC)

- participants.pdf : the list of participants

- authors_index.pdf : the author index

- abstracts_ads.txt : the list of references for the SAO/NASA ADS (this list includes the URLs pointing toward the individual contributions)

- inputpdf.tex : This file is generated by make-book.py and contains the links to the contributions in PDF format. A link to this file is included in book.tex

- liste_contrib.html : the list of contributions in HTML format - used to create the web page on the SF2A website.


TOOLS
-----

check_contrib.py : rewrites the tex file as a pure tex file and runs various checks

make-sessions.py : creates the sessions cover pages

make-contrib.py : processes all the contributions

make-book.py : prepares the book setup

make-listparticipants.py : generates the list of participants
